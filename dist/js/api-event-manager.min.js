ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.AcceptDeny=function(e){function t(){e(function(){this.handleEvents()}.bind(this))}return t.prototype.changeAccepted=function(t,n){e.ajax({url:eventmanager.ajaxurl,type:"post",data:{action:"accept_or_deny",value:t,postId:n},beforeSend:function(i){var a=e("#post-"+n);1===t?(a.find(".deny").removeClass("hidden"),a.find(".accept").addClass("hidden")):0===t&&(a.find(".deny").addClass("hidden"),a.find(".accept").removeClass("hidden"))}})},t.prototype.handleEvents=function(){e(document).on("click",".accept",function(t){t.preventDefault();var n=e(t.target).closest(".accept").attr("post-id");this.changeAccepted(1,n)}.bind(this)),e(document).on("click",".deny",function(t){t.preventDefault();var n=e(t.target).closest(".deny").attr("post-id");this.changeAccepted(0,n)}.bind(this))},new t}(jQuery);var ImportEvents=ImportEvents||{};ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.Import=function(e){function t(){e(function(){this.handleEvents()}.bind(this))}return t.prototype.handleEvents=function(){e(document).on("click",".single-import",function(t){t.preventDefault(),e(this).prop("disabled",!0).text(eventmanager.import_scheduled),e.ajax({url:eventmanager.ajaxurl,type:"post",data:{action:"schedule_single_import",client:this.dataset.client}})})},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.MediaApprove=function(e){function t(){e(function(){var t=e("div#postimagediv > .inside");"event"!==pagenow||t.find("img").length>0||(this.addCheckBoxes(t),this.handleEvents(t))}.bind(this))}return t.prototype.addCheckBoxes=function(t){t.children().hide(),e(".acf-gallery-add").attr("disabled",!0).prop("disabled",!0);var n='<div id="image-approve"><p><strong>'+eventmanager.confirm_statements+"</strong></p>";n+='<input type="checkbox" name="approve" id="first-approve" value="1">',n+="<span> "+eventmanager.promote_event+"</span>",n+="<p>"+eventmanager.identifiable_persons+"</p>",n+='<p><input type="radio" name="approve" value="1">'+eventmanager.yes+' <input type="radio" name="approve" value="0">'+eventmanager.no+"</p>",n+='<div id="persons-approve" class="hidden"><input type="checkbox" name="approve" id="second-approve" value="1">',n+="<span> "+eventmanager.persons_approve+"</span></div></div>",t.append(n)},t.prototype.handleEvents=function(t){e("input:radio[name=approve]").change(function(){1==this.value?e("#persons-approve").removeClass("hidden"):e("#persons-approve").addClass("hidden")}),e("input[name=approve]").change(function(){var n=e("input:checkbox[id=first-approve]:checked").length>0,i=e("input:radio[name=approve]:checked").val(),a=e("input:checkbox[id=second-approve]:checked").length>0;(n&&0==i||n&&a)&&(e("#image-approve").remove(),t.find(":hidden").fadeIn(),e(".acf-gallery-add").attr("disabled",!1).prop("disabled",!1))})},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.MiddleLayerSync=function(e){function t(){e(function(){this.handleEvents()}.bind(this))}return t.prototype.handleEvents=function(){e(document).on("click","#populate-middle-layer",function(t){t.preventDefault(),e(this).prop("disabled",!0).text(eventmanager.middle_layer_synchronization_scheduled),e.ajax({url:eventmanager.ajaxurl,type:"post",data:{action:"schedule_populate_middle_layer"}})})},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.RestrictDatePicker=function(e){function t(){"edit-event"===pagenow&&this.init()}return t.prototype.init=function(){e(document).ready(function(){var t=e('input[name="restrictDateFrom"]'),n=e('input[name="restrictDateTo"]');t.datepicker({dateFormat:"dd-mm-yy"}),n.datepicker({dateFormat:"dd-mm-yy"}),t.on("change",function(){n.datepicker("option","minDate",t.val())}),n.on("change",function(){t.datepicker("option","maxDate",n.val())})})},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.Suggestions=function(e){function t(){o.indexOf(pagenow)<0||(this.switchName(),e(document).on("keyup",'input[name="post_title"]',function(t){var i=e(t.target);clearTimeout(n),n=setTimeout(function(){this.search(i.val())}.bind(this),300)}.bind(this)),e(document).on("click",'[data-action="suggestions-close"]',function(e){e.preventDefault(),this.dismiss()}.bind(this)))}var n,i,a,o=["organizer","location","event","sponsor","package","membership-card","guide"];return t.prototype.search=function(t){if(t.length<=3||t===i)return!1;i=t;var n=eventmanager.wpapiurl+"/wp/v2/"+pagenow+"?search="+t;"event"===pagenow&&(n=eventmanager.wpapiurl+"/wp/v2/"+pagenow+"/search?term="+t),e.get(n,function(e){return e.length?void this.output(e,t):void this.dismiss()}.bind(this),"JSON")},t.prototype.output=function(t,n){var i=e("#title-suggestions");i.length||(i=e('<div id="title-suggestions"></div>'),i.append("<ul></ul>")),i.find("ul").empty(),i.find("ul").append("<li><strong>"+a+':</strong> <button type="button" class="notice-dismiss suggestion-hide" data-action="suggestions-close"></button></li>'),e.each(t,function(e,t){var a="event"===pagenow?t.title:t.title.rendered,o=a.replace("<span>","").replace("</span>"),r=new RegExp("("+n+")","igm"),s=o.replace(r,"<span>$1</span>");i.find("ul").append('<li><a href="'+eventmanager.adminurl+"post.php?post="+t.id+'&action=edit" class="suggestion">'+s+"</a></li>")}),e("#titlewrap").append(i),i.slideDown(200)},t.prototype.dismiss=function(){e("#title-suggestions").slideUp(200,function(){e("#title-suggestions").remove()})},t.prototype.switchName=function(){switch(pagenow){case"organizer":a=eventmanager.organizers+" "+eventmanager.with_similar_name;break;case"location":a=eventmanager.locations+" "+eventmanager.with_similar_name;break;case"sponsor":a=eventmanager.sponsors+" "+eventmanager.with_similar_name;break;case"package":a=eventmanager.packages+" "+eventmanager.with_similar_name;break;case"membership-card":a=eventmanager.membership_cards+" "+eventmanager.with_similar_name;break;case"guide":a=eventmanager.guides+" "+eventmanager.with_similar_name;break;default:a=eventmanager.events+" "+eventmanager.with_similar_name}},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.Validate=function(e){function t(){e(document).on("click","#publish",function(e){return this.post_title()}.bind(this)),e(document).on("keypress",'input[name="post_title"]',function(e){return 13!=e.which||this.post_title()}.bind(this))}return t.prototype.image=function(){var t=e("body").hasClass("imported");if(!t){var n=e("#postimagediv").find("img");if(!(n.length>0)){var i=eventmanager.require_image;return this.showError("image",i),!1}e(".require-image").remove()}return!0},t.prototype.post_title=function(){var t=e("#title");if(!(t.val().length>0)){var n=eventmanager.require_title;return this.showError("title",n),!1}return e(".require-title").remove(),!0},t.prototype.showError=function(t,n){setTimeout(function(){e("#ajax-loading").css("visibility","hidden")},100),setTimeout(function(){e("#publish").removeClass("button-primary-disabled")},100),e(".require-"+t).length||e("#post").before('<div class="error require-'+t+'"><p>'+n+"</p></div>")},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Prompt=ImportEvents.Prompt||{},ImportEvents.Prompt.Modal=function(e){function t(){e(function(){this.handleEvents()}.bind(this))}var n=!1;return t.prototype.open=function(t,i){e("body").addClass("lightbox-open").append('            <div id="lightbox">                <div class="lightbox-wrapper">                    <button class="lightbox-close" data-lightbox-action="close">&times; '+eventmanager.close+'</button>                    <iframe class="lightbox-iframe" src="'+t+'" frameborder="0" allowtransparency></iframe>                </div>            </div>        '),"undefined"!=typeof i&&e(".lightbox-iframe").bind("load",function(){var t=e(this).contents().find("#post");t.append('<input type="hidden" id="parentId" name="parentId" value="'+i+'" />')}),n=!0},t.prototype.close=function(){e(".lightbox-iframe");e("body").removeClass("lightbox-open"),e("#lightbox").remove(),n=!1},t.prototype.handleEvents=function(){e(document).on("click",'[data-lightbox-action="close"]',function(e){e.preventDefault(),this.close()}.bind(this))},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Admin=ImportEvents.Admin||{},ImportEvents.Admin.NewPostModal=function(e){function t(){e(function(){this.createTrigger("location",".acf-field-576117c423a52"),this.createTrigger("organizer",".acf-field-5922a161ab32f"),this.createTrigger("sponsor",".acf-field-57a9d5f3804e1"),this.createTrigger("membership-card",".acf-field-57c7ed92054e6"),this.createTrigger("membership-card",".acf-field-581847f9642dc"),this.bindLaunchModal()}.bind(this))}return t.prototype.createTrigger=function(t,n){e(n).length&&"undefined"!=typeof eventmanager["new_"+t]&&e(n).append('<a class="createNewPost button" href="'+eventmanager.adminurl+"post-new.php?post_type="+t+'&lightbox=true">'+eventmanager["new_"+t]+"</a>")},t.prototype.bindLaunchModal=function(){e(document).on("click",".createNewPost",function(t){t.preventDefault(),ImportEvents.Prompt.Modal.open(e(this).attr("href"),e("#post_ID").val())})},new t}(jQuery),ImportEvents=ImportEvents||{},ImportEvents.Prompt=ImportEvents.Prompt||{},ImportEvents.Prompt.Notice=function(e){function t(){e(document).on("click",".event-guidelines .notice-dismiss",function(e){this.dismissInstructions()}.bind(this))}return t.prototype.dismissInstructions=function(){var t={action:"dismiss"};e.post(ajaxurl,t)},new t}(jQuery);